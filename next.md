# Next.js

## Next.js 란 무엇인가?

1. 리액트 기능의 기반으로 한 풀스택 웹 애플리케이션 프레임 워크이다.
2. 풀스택 웹 애플리케이션 프레임웍 중에서 웹 애플리케이션을 이것이 웹앱을 만드는 도구라는 것을 알려준다.
3. 풀스택이란 웹을 이루고 있는 두 개 요소인 프론트엔트와 백엔드 기능을 모두 가지고 있다는 뜻이다.
4. 기본적으로 서버사이드 렌더링을 지원한다. 서버쪽에서 자바스크립트를 실행한다. 완성된 html을 전송한다.

## Next.js 설치, 실행

1. 앱 라우터와 페이지 라우터는 완전히 다르다.
2. 리액트 명령어 npm start가 아닌 npm run dev를 입력해서 개발환경을 시작해야한다.

## 샘플 앱 세탁

1. layout.js라는 파일이 기본적인 웹페이지에 골격을 구성한다.

## 빌드와 배포

1. 콘솔 창에는 개발을 위한 것이 출력되는 데 보안상의 문제가 될 수 도 있다.
2. npm run build를 하면 배포판이 .next 파일 내에 만들어진다. 이 상태에서 npm run start를 하면 .next 파일 내에 저장된 파일이 서비스되기 시작한다.
3. 배포판으로 만들면 훨씬 더 리소스를 덜 차지 한다.

## 뼈대 만들기 - layout & page

1. page.js가 리턴하는 값이 그 컨텐트가 된다.
2. 어떤 페이지를 가던 간에 그 내용들은 공통된 내용이기 때문에 공통된 내역을 다루는 layout을 다루는 것이 효과적이다.
3. 제목을 바꾸고 싶을 때에는 metadata 함수를 export한 후 변경해주면 된다.

## Next.js의 도로교통 시스템 - Routing

1. 웹 프레임워크에서 가장 중요한 개념 중 하나이다.
2. http://a.com/dashboard/analytics/ 에서 a.com은 domain name, dashboard/analytics 부분은 경로, 각각의 요소들은 세그먼트라 부른다.
3. 어떤 컨텐츠를 어떤 방식으로 보여줄 것인가를 결정하는 것을 routing이라 부른다.

## Single Page Application

1. 리액트는 java script를 끄면 동작하지 않지만 next.js는 꺼도 렌더링이 잘 된다. (next.js는 html을 응답하기 때문이다.)
2. 웹페이지가 여러 개의 페이지임에도 불구하고 마치 한 페이지인 것처럼 동작하는 것을 Single page application이라고 한다.
3. a 태그 대신 Link 태그를 대신 사용하면 된다.

## 정적인 자원 사용하기 - public

1. next.js에서 정적인 컨텐츠를 사용할 때에는 public 파일에 위치시키면 된다.

## css

1. globals.css 파일은 전역적으로 디자인을 적용할 수 있는 위치이다.

## backend

1. npx json-sever 명령어를 통해서 서버 구축이 가능하다.
2. --port 9999는 9999번 포트를 준다는 말이다.
3. --watch 를 통해서 db.json 파일이 수정되면 바로 서버가 재시동된다.

## 글 목록 가져오기

1. next.js에서는 서버 컴포넌트와 클라이언트 컴포넌트라는 개념이 구분되어 있다. (리액트에서 가져온 개념이다.)
2. 클라이언트 컴포넌트에서는 useState, useEffect, onClick, onChange, useRouter, useParams을 사용할 수 있다.
3. next.js 에서 특별한 조치를 하지 않으면 서버 컴포넌트로 간주한다.
4. 사용자와 상호작용하고 있지 않은 것은 서버 컴포넌트로 구현하는 것이 유리하다.
5. 사용자와 상호작용하는 것은 클라이언트 컴포넌트로 구현하는 것이 유리하다.
6. "use client";를 쓰면 클라이언트 컴포넌트를 사용한다.

## 읽기 기능 구현

1. 사용자와 상호작용하는 가? 를 먼저 생각한 후 서버인지 클라이언트인지 결정한다.

## 생성 기능 구현 - Client component

1. router.push를 사용하면 페이지 리로드 없이 사용자의 화면을 해당 페이지로 이동한다.

## 환경변수

1. 보안 문제 때문에 환경변수는 layout.js와 같은 서버 컴포넌트에서만 접속이 가능하다.
2. 웹브라우저를 위해서 쓰고 싶다면 NEXT*PUBLIC*을 추가 해주면 된다.
3. .gitignore파일에 .env\*.local이 있는 데 버전 관리를 하지 못하도록 막아 두었다.
